# KireMisu Secure Environment Configuration Template
# Copy this file to .env and configure the values for your installation

# ======================
# SECURITY CONFIGURATION - CRITICAL
# ======================

# JWT Secret Key - CRITICAL: Generate a secure random key
# Must be at least 32 characters long for security
# Generate with: python -c "import secrets, base64; print(base64.b64encode(secrets.token_bytes(64)).decode())"
# NEVER use the example value in production!
SECRET_KEY=REPLACE_WITH_SECURE_64_CHARACTER_SECRET_KEY_GENERATED_FOR_YOUR_INSTALLATION

# JWT Token Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_HOURS=24

# Password Security Requirements
PASSWORD_MIN_LENGTH=8
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

# Rate Limiting for Authentication
AUTH_RATE_LIMIT_ATTEMPTS=5
AUTH_RATE_LIMIT_WINDOW_MINUTES=30

# ======================
# ADMIN USER SETUP - REQUIRED
# ======================

# Initial admin user (created automatically on first run)
# IMPORTANT: Use a strong password and change it after first login
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=CHANGE_THIS_TO_A_SECURE_PASSWORD_MEETING_COMPLEXITY_REQUIREMENTS
DEFAULT_ADMIN_EMAIL=admin@kiremisu.local

# ======================
# DATABASE CONFIGURATION
# ======================

# PostgreSQL Database Connection
DATABASE_URL=postgresql+asyncpg://kiremisu:kiremisu@localhost:5432/kiremisu

# ======================
# SERVER CONFIGURATION  
# ======================

# Server Settings
HOST=0.0.0.0
PORT=8000
DEBUG=false

# Environment (development, staging, production)
KIREMISU_ENV=production

# CORS Origins (JSON array format)
ALLOWED_ORIGINS=["http://localhost:3000","https://yourdomain.com"]

# ======================
# STORAGE CONFIGURATION
# ======================

# Manga Library Paths (JSON array format)
MANGA_STORAGE_PATHS=["/path/to/manga/library"]

# ======================
# EXTERNAL API SETTINGS
# ======================

# MangaDx API Configuration
MANGADX_API_URL=https://api.mangadx.org
MANGADX_RATE_LIMIT_PER_MINUTE=60

# ======================
# PUSH NOTIFICATIONS
# ======================

# VAPID Keys for Web Push Notifications
# Generate with: python -c "from py_vapid import Vapid; v = Vapid(); v.generate_keys(); print(f'PUBLIC: {v.public_key_bytes().hex()}'); print(f'PRIVATE: {v.private_key_bytes().hex()}')"
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_CLAIMS={"sub": "mailto:admin@kiremisu.local"}

# ======================
# FILE PROCESSING
# ======================

# File Upload Limits
MAX_FILE_SIZE_MB=500
THUMBNAIL_SIZE=(300,400)

# ======================
# BACKGROUND JOBS
# ======================

# Job Processing Configuration
JOB_POLL_INTERVAL_SECONDS=5
MAX_CONCURRENT_JOBS=2

# ======================
# SECURITY CHECKLIST
# ======================

# □ Generated unique SECRET_KEY (at least 32 characters)
# □ Set strong DEFAULT_ADMIN_PASSWORD (min 8 chars, mixed case, numbers, symbols)
# □ Updated DEFAULT_ADMIN_EMAIL to your actual email
# □ Configured DATABASE_URL with secure credentials
# □ Set ALLOWED_ORIGINS to your actual frontend domains
# □ Generated VAPID keys for push notifications (if using)
# □ Set KIREMISU_ENV=production for production deployments
# □ Reviewed all default values and updated as needed

# Password Requirements:
# - At least 8 characters long
# - Contains uppercase and lowercase letters
# - Contains numbers and special characters  
# - Avoids common patterns and dictionary words

# For production deployments:
# - Use HTTPS (configure reverse proxy)
# - Use strong database credentials
# - Regularly rotate SECRET_KEY and passwords
# - Monitor authentication logs for suspicious activity
# - Keep admin passwords updated regularly